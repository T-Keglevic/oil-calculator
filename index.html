<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Kalkulator ulja za dvotaktne motore</title>
    <meta name="description" content="Brzi kalkulator za mije≈°anje ulja i benzina za dvotaktne motore">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            background: rgba(30, 30, 46, 0.95);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            width: 100%;
            max-width: 400px;
            padding: 30px 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        h1 {
            color: #4a9eff;
            font-size: clamp(20px, 5vw, 26px);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .subtitle {
            color: #888;
            font-size: 14px;
            margin-bottom: 25px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-size: 15px;
            color: #b0b0b0;
            margin-bottom: 8px;
            font-weight: 500;
        }

        input[type="number"],
        select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #333;
            background: #2a2a3e;
            border-radius: 8px;
            font-size: 16px;
            color: #fff;
            transition: all 0.3s ease;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }

        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: #4a9eff;
            background: #323249;
        }

        /* Remove spinner buttons on number input for cleaner mobile look */
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type="number"] {
            -moz-appearance: textfield;
        }

        select {
            cursor: pointer;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%234a9eff' d='M6 8L0 0h12z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            padding-right: 45px;
        }

        .result-box {
            background: linear-gradient(135deg, #2a4a6a 0%, #1a3a5a 100%);
            border-radius: 12px;
            padding: 20px;
            margin-top: 25px;
            border: 2px solid rgba(74, 158, 255, 0.3);
            text-align: center;
        }

        .result-label {
            font-size: 14px;
            color: #b0b0b0;
            margin-bottom: 8px;
        }

        .result-value {
            font-size: clamp(28px, 8vw, 36px);
            font-weight: 700;
            color: #4a9eff;
            font-variant-numeric: tabular-nums;
        }

        .unit {
            font-size: 18px;
            color: #888;
            margin-left: 4px;
        }

        .error-message {
            color: #ff6b6b;
            font-size: 13px;
            margin-top: 6px;
            min-height: 18px;
        }

        .info-text {
            font-size: 12px;
            color: #666;
            margin-top: 20px;
            text-align: center;
            line-height: 1.5;
        }

        /* Improved touch targets for mobile */
        @media (hover: none) and (pointer: coarse) {
            input[type="number"],
            select {
                padding: 16px;
                font-size: 18px;
            }
        }

        /* Better readability on small screens */
        @media (max-width: 380px) {
            .container {
                padding: 25px 20px;
            }
        }

        /* Accessibility: Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            * {
                transition: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Kalkulator ulja</h1>
        <p class="subtitle">za zweitakte</p>
        
        <div class="input-group">
            <label for="gasoline">Koliƒçina benzina (litara)</label>
            <input 
                type="number" 
                id="gasoline" 
                step="0.1" 
                min="0.1" 
                max="100"
                placeholder="npr. 5.0"
                inputmode="decimal"
            >
            <div class="error-message" id="gasolineError"></div>
        </div>

        <div class="input-group">
            <label for="ratio">≈Ωeljeni omjer</label>
            <select id="ratio">
                <option value="50">50:1 (2%)</option>
                <option value="40" selected>40:1 (2.5%)</option>
                <option value="33.33">33:1 (3%)</option>
                <option value="25">25:1 (4%)</option>
            </select>
        </div>

        <div class="result-box">
            <div class="result-label">Potrebna koliƒçina ulja</div>
            <div class="result-value">
                <span id="oilAmount">0.00</span><span class="unit">L</span>
            </div>
        </div>

        <p class="info-text">
            üí° Provjerite preporuku proizvoƒëaƒça za svoj stroj.<br>
        </p>
    </div>

    <script>
        'use strict';

        document.addEventListener('DOMContentLoaded', function() {
            const gasolineInput = document.getElementById('gasoline');
            const ratioSelect = document.getElementById('ratio');
            const oilAmountDisplay = document.getElementById('oilAmount');
            const gasolineError = document.getElementById('gasolineError');

            /**
             * Calculate required oil amount based on gasoline and ratio
             * @param {number} gasoline - Amount of gasoline in liters
             * @param {number} ratio - Mixing ratio (e.g., 40 for 40:1)
             * @returns {number} - Required oil amount in liters
             */
            function calculateOil(gasoline, ratio) {
                if (isNaN(gasoline) || isNaN(ratio) || gasoline <= 0 || ratio <= 0) {
                    return 0;
                }
                return gasoline / ratio;
            }

            /**
             * Validate gasoline input
             * @param {number} value - Input value
             * @returns {Object} - Validation result with isValid flag and error message
             */
            function validateGasoline(value) {
                if (value === '' || value === null) {
                    return { isValid: false, error: '' };
                }
                
                const num = parseFloat(value);
                
                if (isNaN(num)) {
                    return { isValid: false, error: 'Unesite valjani broj' };
                }
                
                if (num <= 0) {
                    return { isValid: false, error: 'Koliƒçina mora biti veƒáa od 0' };
                }
                
                if (num > 100) {
                    return { isValid: false, error: 'Maksimalna koliƒçina: 100L' };
                }
                
                return { isValid: true, error: '' };
            }

            /**
             * Update the display with calculated oil amount
             */
            function updateCalculation() {
                const gasolineValue = gasolineInput.value;
                const ratioValue = parseFloat(ratioSelect.value);
                
                const validation = validateGasoline(gasolineValue);
                gasolineError.textContent = validation.error;
                
                if (!validation.isValid) {
                    oilAmountDisplay.textContent = '0.00';
                    return;
                }
                
                const gasoline = parseFloat(gasolineValue);
                const requiredOil = calculateOil(gasoline, ratioValue);
                
                // Format to appropriate precision
                // For small amounts (< 0.1L = 100ml), show more precision
                const precision = requiredOil < 0.1 ? 3 : 2;
                oilAmountDisplay.textContent = requiredOil.toFixed(precision);
            }

            // Event listeners
            gasolineInput.addEventListener('input', updateCalculation);
            ratioSelect.addEventListener('change', updateCalculation);

            // Set initial value to make the app immediately useful
            gasolineInput.value = '5';
            
            // Initial calculation
            updateCalculation();

            // Optional: Store last used values in localStorage for convenience
            try {
                const savedGasoline = localStorage.getItem('lastGasoline');
                const savedRatio = localStorage.getItem('lastRatio');
                
                if (savedGasoline) gasolineInput.value = savedGasoline;
                if (savedRatio) ratioSelect.value = savedRatio;
                
                updateCalculation();
                
                // Save on change
                gasolineInput.addEventListener('change', function() {
                    localStorage.setItem('lastGasoline', gasolineInput.value);
                });
                
                ratioSelect.addEventListener('change', function() {
                    localStorage.setItem('lastRatio', ratioSelect.value);
                });
            } catch (e) {
                // localStorage might be disabled, fail silently
                console.warn('localStorage not available:', e);
            }
        });
    </script>
</body>
</html>

